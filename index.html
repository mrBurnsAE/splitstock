<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ë–æ—Ç-–°–∫–ª–∞–¥—á–∏–∫</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

    <div id="preloader">
        <div class="spinner"></div>
        <div class="loader-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div id="view-home" class="view active">
        <div class="header">
            <div class="user-info">
                <img src="icons/Logo Telegram.svg" alt="Avatar" class="user-avatar" id="header-avatar" style="opacity: 0; transition: opacity 0.3s;">
                <div class="user-name" id="header-username"></div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <h2 class="section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                <a href="#" class="link-all" onclick="switchView('categories')">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</a>
            </div>
            <div class="categories-grid"></div>
        </div>

        <div class="banner">
            <div class="banner-content">
                <div class="banner-title">–ù–µ –∑–∞–±—É–¥—å –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</div>
                <div class="banner-subtitle">–Ω–∞ –∫–∞–Ω–∞–ª —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏</div>
                <button class="btn-small" onclick="Telegram.WebApp.openTelegramLink('https://t.me/YOUR_CHANNEL_LINK')">
                    <img src="icons/Logo Telegram.svg" width="14" style="filter: brightness(100);"> –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
                </button>
            </div>
            <img src="icons/–°—É–ø–µ—Ä–º—ç–Ω –±–µ–∑ —Ñ–æ–Ω–∞.png" alt="Robot" class="banner-img">
        </div>

        <div class="section">
            <div class="section-header">
                <h2 class="section-title">üî• –¢–æ–ø 5 –Ω–æ–≤—ã—Ö</h2>
            </div>
            <div class="compact-list" id="home-new-container"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <h2 class="section-title">‚úÖ –¢–æ–ø 5 –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö</h2>
            </div>
            <div class="compact-list" id="home-completed-container"></div>
        </div>
        
        <div style="height: 20px;"></div>
        </div>
    </div>

    <div id="view-categories" class="view">
        <div class="filter-header" style="padding: 20px 20px 10px 20px;">
            <button class="back-btn" onclick="switchView('home')">
                <img src="icons/undo.svg" alt="–ù–∞–∑–∞–¥">
            </button>
            <div class="filter-title">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
        </div>

        <div class="section">
            <div class="full-categories-list" id="all-categories-container"></div>
        </div>
    </div>

    <div id="view-catalog" class="view">
        <div class="header">
            <div class="search-bar">
                <div class="search-field">
                    <img src="icons/search.svg" class="search-icon" alt="–ü–æ–∏—Å–∫">
                    <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫">
                </div>
                <button class="filter-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <path d="M4 21v-7M4 10V3M12 21v-9M12 8V3M20 21v-5M20 12V3M1 14h6M9 8h6M17 16h6"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="selectTab(this)">–ê–∫—Ç–∏–≤–Ω—ã–µ</div>
            <div class="tab" onclick="selectTab(this)">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ</div>
            <div class="tab" onclick="selectTab(this)">–ú–æ–∏ —Å–∫–ª–∞–¥—á–∏–Ω—ã</div>
        </div>

        <div class="section">
            <div class="item-container"></div>
        </div>
    </div>

    <div id="view-profile" class="view">
        <div class="section" style="text-align: center; padding-top: 40px;">
            <img src="icons/Logo Telegram.svg" class="user-avatar" id="profile-avatar" style="width: 80px; height: 80px; margin-bottom: 10px; opacity: 0; transition: opacity 0.3s;">
            <h2 style="font-size: 22px; font-weight: 700;" id="profile-username"></h2>
            <p style="color: var(--text-secondary); font-size: 14px;" id="profile-join-date"></p>
        </div>

        <div class="section">
            <div class="profile-menu">
                <button class="profile-btn" onclick="openModal()">
                    <img src="icons/status.svg" alt="–°—Ç–∞—Ç—É—Å" class="profile-btn-icon">
                    <div style="text-align: left;">
                        <div style="font-size: 12px; color: var(--text-secondary);">–°—Ç–∞—Ç—É—Å</div>
                        <div style="font-size: 16px; font-weight: 700;" id="profile-status-text">...</div>
                    </div>
                </button>

                <button class="profile-btn" onclick="openMyItems('active')">
                    <img src="icons/folder.svg" alt="–ê–∫—Ç–∏–≤–Ω—ã–µ" class="profile-btn-icon">
                    <div style="text-align: left;">
                        <div style="font-size: 12px; color: var(--text-secondary);">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–∫–ª–∞–¥—á–∏–Ω—ã</div>
                        <div style="font-size: 16px; font-weight: 700;" id="profile-active-count">...</div>
                    </div>
                </button>

                <button class="profile-btn" onclick="openMyItems('completed')">
                    <img src="icons/archive.svg" alt="–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ" class="profile-btn-icon">
                    <div style="text-align: left;">
                        <div style="font-size: 12px; color: var(--text-secondary);">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Å–∫–ª–∞–¥—á–∏–Ω—ã</div>
                        <div style="font-size: 16px; font-weight: 700;" id="profile-completed-count">...</div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <div id="view-product" class="view">
        <div class="product-header">
            <button class="back-btn" onclick="closeProduct()">
                <img src="icons/undo.svg" alt="–ù–∞–∑–∞–¥">
            </button>
            <div class="header-title" id="product-header-title"></div>
        </div>

        <div class="media-container">
            <div class="video-wrapper" id="video-wrapper-el">
                <iframe id="main-video-frame" src="" frameborder="0" allow="autoplay; encrypted-media; fullscreen; picture-in-picture" allowfullscreen></iframe>
                <div id="no-video-placeholder" style="display:none;">
                    <img id="product-cover-img" src="" style="width:100%; display:block;">
                </div>
            </div>
            
            <div class="platform-switcher" id="video-switchers">
                <button class="platform-btn active" onclick="switchVideo('youtube')" id="btn-youtube">
                    <img src="icons/youtube.svg" alt="YouTube">
                    <span>YouTube</span>
                </button>
                <button class="platform-btn" onclick="switchVideo('vk')" id="btn-vk">
                    <img src="icons/VKVideo.png" alt="VK">
                    <span>VK –í–∏–¥–µ–æ</span>
                </button>
                <button class="platform-btn" onclick="switchVideo('rutube')" id="btn-rutube">
                    <img src="icons/Rutube.png" alt="RuTube">
                    <span>RUTUBE</span>
                </button>
            </div>
        </div>

        <div class="product-info">
            <p class="product-desc" id="product-desc"></p>
            <a href="#" class="product-link-external" id="product-link-ext">üîó –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>

            <div class="tags-block">
                <div id="product-category" class="tag-category"></div>
                <div id="product-tags" class="tag-list"></div>
            </div>

            <div class="price-block">
                <div>–°—Ç–æ–∏–º–æ—Å—Ç—å <span id="product-price-orig" style="color: white; font-weight: 700;"></span></div>
                <div>–í–∑–Ω–æ—Å <span id="product-price-contrib" style="color: white; font-weight: 700;"></span></div>
            </div>

            <div class="progress-section-large">
                <div class="progress-labels">
                    <span id="participants-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
                    <span id="participants-count" style="font-weight: 700;"></span>
                </div>
                <div class="progress-labels" id="fundraising-label-row" style="display:none; margin-top:4px;">
                    <span style="color: #a2a5b9;">–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±–æ—Ä–∞ —Å—Ä–µ–¥—Å—Ç–≤</span>
                    <span id="fundraising-count" style="font-weight: 700;"></span>
                </div>

                <div class="progress-bar large">
                    <div class="progress-fill" id="product-progress-fill" style="width: 0%;"></div>
                </div>
            </div>

            <div class="product-status-text" id="product-status-text"></div>
        </div>

        <div class="product-action-bar">
            <button class="btn-primary" id="product-action-btn" onclick="handleProductAction()">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
            <button class="btn-close-square" id="product-leave-btn" style="display: none;" onclick="leaveProduct()">
                <img src="icons/cross.svg" width="24">
            </button>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item" onclick="switchView('catalog')">
            <img src="icons/apps.svg" class="nav-icon" id="icon-catalog">
            <span>–°–∫–ª–∞–¥—á–∏–Ω—ã</span>
        </div>
        <div class="nav-item active" onclick="switchView('home')">
            <img src="icons/home active.svg" class="nav-icon" id="icon-home">
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" onclick="switchView('profile')">
            <img src="icons/user.svg" class="nav-icon" id="icon-profile">
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </nav>

    <div class="modal-overlay" id="modal-status">
        <div class="modal-content">
            <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 5px;">–í–∞—à —Å—Ç–∞—Ç—É—Å</div>
            <img src="icons/–ù–æ–≤–∏—á–æ–∫ –ë–µ–∑ —Ñ–æ–Ω–∞.png" class="modal-img" id="modal-status-img">
            <div class="modal-title" id="modal-status-title"></div>
            <div class="modal-text" id="modal-status-desc"></div>
            <button class="btn-primary" id="modal-status-ok-btn" onclick="closeModal()">OK</button>
            <div id="modal-status-penalty-btns" style="display: none; gap: 10px; margin-top: 15px;">
                <button class="btn-primary" style="background: linear-gradient(90deg, #ff4757 0%, #ff6b81 100%);" onclick="closeModal(); openPaymentModal('penalty')">–û–ø–ª–∞—Ç–∏—Ç—å —à—Ç—Ä–∞—Ñ</button>
                <button class="btn-secondary" onclick="closeModal()">–ù–∞–∑–∞–¥</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-payment">
        <div class="modal-content">
            <img src="icons/–û–ø–ª–∞—Ç–∞ –ë–µ–∑ —Ñ–æ–Ω–∞.png" class="payment-img" alt="Payment">
            <div class="payment-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</div>
            <div class="payment-buttons">
                <button class="pay-method-btn yoo" onclick="selectPaymentMethod('yoomoney')">
                    <img src="icons/–ÆMoney.svg" alt="–ÆMoney">
                    –ÆMoney
                </button>
                <button class="pay-method-btn crypto" onclick="selectPaymentMethod('crypto')">
                    <img src="icons/CryptoPay.png" alt="Crypto">
                    CryptoPay
                </button>
            </div>
            <button class="payment-cancel-btn" onclick="closePaymentModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <div id="view-filter" class="view">
        <div class="filter-header">
            <button class="back-btn" onclick="closeFilter()">
                <img src="icons/undo.svg" alt="–ù–∞–∑–∞–¥">
            </button>
            <div class="filter-title">–§–∏–ª—å—Ç—Ä</div>
        </div>
        <div class="filter-section">
            <div class="sort-buttons">
                <button class="sort-btn active" onclick="selectSort('new', this)">–ù–æ–≤—ã–µ</button>
                <button class="sort-btn" onclick="selectSort('old', this)">–°—Ç–∞—Ä—ã–µ</button>
                <button class="sort-btn" onclick="selectSort('popular', this)">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</button>
            </div>
        </div>
        <div class="filter-section">
            <div class="filter-section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
            <div class="chips-grid" id="filter-categories-container"></div>
        </div>
        <div class="filter-section">
            <div class="filter-section-title">–¢–µ–≥–∏</div>
            <div class="chips-grid" id="filter-tags-container"></div>
        </div>
        <div class="filter-actions">
            <button class="btn-secondary" onclick="resetFilter()">–°–±—Ä–æ—Å–∏—Ç—å</button>
            <button class="btn-primary" onclick="applyFilter()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
    </div>

    <div id="view-category-details" class="view">
        <div class="filter-header">
            <button class="back-btn" onclick="switchView('categories')">
                <img src="icons/undo.svg" alt="–ù–∞–∑–∞–¥">
            </button>
            <div class="filter-title" id="cat-details-title"></div>
        </div>
        <div class="tabs">
            <div class="tab active" id="tab-cat-active" onclick="selectCategoryInnerTab('active')">–ê–∫—Ç–∏–≤–Ω—ã–µ</div>
            <div class="tab" id="tab-cat-completed" onclick="selectCategoryInnerTab('completed')">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ</div>
        </div>
        <div class="section">
            <div class="item-container" id="category-details-container"></div>
        </div>
    </div>

    <div id="view-my-items" class="view">
        <div class="filter-header">
            <button class="back-btn" onclick="switchView('profile')">
                <img src="icons/undo.svg" alt="–ù–∞–∑–∞–¥">
            </button>
            <div class="filter-title" id="my-items-title">–ú–æ–∏ —Å–∫–ª–∞–¥—á–∏–Ω—ã</div>
        </div>
        <div class="section">
            <div class="item-container" id="my-items-container"></div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-alert">
        <div class="modal-content">
            <img src="icons/info.svg" class="modal-img" id="modal-alert-img" style="width: 80px !important; height: 80px !important; margin-bottom: 15px;">
            <div class="modal-title" id="modal-alert-title">SplitStockBot</div>
            <div class="modal-text" id="modal-alert-msg">–°–æ–æ–±—â–µ–Ω–∏–µ</div>
            <button class="btn-primary" onclick="closeAlertModal()">–ü–æ–Ω—è—Ç–Ω–æ</button>
        </div>
    </div>

    <script src="script.js?v=69"></script>
</body>
</html>